--- frontmatter structured data:
name: Dungeon Crawler
status: planning implementation phase - gamebuilder
change_type: New Feature
project_phase: MVP
priority: 5
stage: 1plan
last_updated: '2026-01-20T00:55:09.728398'
file_paths:
- project_root: /Users/stephen.hilton/Dev/bentwookie/test/init_test/code
- tasks: tasks
- task: tasks/1plan/dungeon-crawler.md
infrastructure:
- compute: Local Code Only
- storage: Local File System
- queue: None (push only)
- access: Direct Compute Connection
errors: []
---

# Instructions
## Instructions for Planning
ENTER PLAN MODE

Carefully review the validated user requirements, both in the structured frontmatter yaml format, which contains validated user requirements, and in the freeform "User Request" markdown. Begin planning for code implementation.

## Implemntation Plan File Location
You MUST write your implementation plan to this markdown file:
`tasks/1plan/dungeon-crawler.md`
Under the section "Implementation Plan". 

## Success Criteria
Check these success critieria after each planning iteration:
- Create a full implementation plan that aligns with the user's stated goal in:
    - the frontmatter yaml (aka structured requirements)
    - the "User Request" section (freeform description)
- Implementation plan must been saved to `{plan_md}`

## Document Errors / Learnings
Anytime you make an important learning about planning, append a note to the `tasks/1plan/.resources/learnings.md`.
This could be an error / resolution, or a short-cut discovered, or important feedback from the user. 
Anything that will help future agents create working implementation plans in the future. 

## IMPORTANT!!!
- Do NOT directly edit the frontmatter yaml
- Do NOT ask user to continue to implementation
- Do NOT ask user to begin development
- DO offer to update the status to "Ready for Implementation" which adds it to the `bw` work queue

To update the status of this task:
```bash
bw update_status --task "tasks/1plan/dungeon-crawler.md" --new_status "{new_status}"
```



# Learnings
## Global Learnings
# Learnings: How to use this file
Entries below are learnings or shortcut ideas created directly by the AI Coding Agents during their execution, to help future AI Coding Agents avoid error and optimize execution. 

- this file is modifed by AI
- appended entries should be kept short and concise
- never duplicate learnings; update previous entries if they were incomplete or obsolete

# Learnings
AI Coding Agents should append / update the bullet points below.

- The project source code directory is `/Users/stephen.hilton/Dev/bentwookie/test/init_test/code`.
- Always use the "Standard Data Format" (SDF) when passing data between components.
- Append new learnings to this list first, then deduplicate before marking a Task as complete.


## Stage Learnings (1plan)
# Learnings: How to use this file
Entries below are learnings or shortcut ideas created directly by the AI Coding Agents during their execution, to help future AI Coding Agents avoid error and optimize execution. 

- this file is modifed by AI
- appended entries should be kept short and concise
- never duplicate learnings; update previous entries if they were incomplete or obsolete

# Learnings
AI Coding Agents should append / update the bullet points below.

- Start by reading and understanding all markdown files in `tasks/global/*.md`
- Learnings in this file should supercede `tasks/global/learnings.md` but not `tasks/global/interfaces.md`



# User Request
create a simple python "dungeon crawler" game, where you move around a maze fighting monsters and collecting treasure and magic weapons.  Make it look cool.



# Implementation Plan

## Overview
A terminal-based dungeon crawler game in Python featuring procedurally generated mazes, real-time combat, treasure collection, and magic weapons. The game will use the `rich` library for visually appealing terminal graphics with colors, panels, and ASCII art.

## Technology Stack
- **Python 3.10+** - Core language
- **rich** - Terminal UI with colors, panels, tables, and progress bars (makes it look cool)
- **blessed** - Terminal keyboard input handling for real-time movement
- **random** - Procedural maze and item generation

## Project Structure
```
code/
â”œâ”€â”€ dungeon_crawler/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py              # Entry point and game loop
â”‚   â”œâ”€â”€ game.py              # Core game state management
â”‚   â”œâ”€â”€ player.py            # Player class with stats, inventory
â”‚   â”œâ”€â”€ monsters.py          # Monster classes and AI
â”‚   â”œâ”€â”€ items.py             # Weapons, treasure, magic items
â”‚   â”œâ”€â”€ dungeon.py           # Maze generation and room management
â”‚   â”œâ”€â”€ combat.py            # Combat system
â”‚   â”œâ”€â”€ renderer.py          # Rich-based terminal rendering
â”‚   â””â”€â”€ constants.py         # Game constants and configuration
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

## Core Game Features

### 1. Dungeon/Maze System
- Procedurally generated maze using recursive backtracking algorithm
- Multiple dungeon levels with increasing difficulty
- Room types: empty, treasure room, monster den, weapon cache, exit
- Visual representation using Unicode box-drawing characters

### 2. Player System
- Stats: HP, Attack, Defense, Gold
- Inventory system for weapons and items
- Movement: WASD or arrow keys
- Level progression

### 3. Monster System
Monster types with scaling difficulty:
| Monster | HP | Attack | Defense | Gold Drop |
|---------|-----|--------|---------|-----------|
| Rat | 10 | 3 | 1 | 5 |
| Goblin | 20 | 6 | 2 | 15 |
| Orc | 40 | 10 | 5 | 30 |
| Troll | 60 | 15 | 8 | 50 |
| Dragon | 100 | 25 | 15 | 200 |

### 4. Item/Weapon System
**Weapons** (with attack bonuses):
- Rusty Dagger (+2)
- Short Sword (+5)
- Battle Axe (+8)
- Magic Staff (+10, ðŸ”® special effects)
- Flaming Sword (+15, ðŸ”¥ fire damage)
- Frost Blade (+12, â„ï¸ freezing effect)

**Treasure**:
- Gold coins (various amounts)
- Gems (bonus points)
- Health potions (restore HP)

### 5. Combat System
- Turn-based encounters when player enters monster tile
- Attack calculation: `damage = attacker_attack + weapon_bonus - defender_defense`
- Chance to flee (based on player level vs monster level)
- Loot drops on monster defeat

### 6. Visual Design (Rich Library)
- Colorful ASCII map with distinct symbols:
  - `@` Player (bright cyan)
  - `â–ˆ` Walls (dark gray)
  - `.` Floor (dim white)
  - `$` Treasure (yellow)
  - `â€ ` Weapon (magenta)
  - `M` Monster (red)
  - `>` Exit (green)
- Status panel showing HP bar, gold, current weapon
- Combat log with colored messages
- Inventory panel with item details

## Implementation Steps

### Phase 1: Core Framework (4 files)
1. **constants.py** - Define all game constants, colors, symbols
2. **player.py** - Player class with stats, inventory, movement
3. **dungeon.py** - Maze generation algorithm, room placement
4. **renderer.py** - Rich-based display with map, status, log panels

### Phase 2: Game Entities (3 files)
5. **items.py** - Weapon and treasure item classes
6. **monsters.py** - Monster classes with stats, AI behavior
7. **combat.py** - Turn-based combat resolution

### Phase 3: Game Logic (2 files)
8. **game.py** - Main game state, event handling, game over logic
9. **main.py** - Entry point, game initialization, main loop

### Phase 4: Polish & Packaging (2 files)
10. **requirements.txt** - Dependencies (rich, blessed)
11. **README.md** - How to install and play

## Maze Generation Algorithm
Using recursive backtracking:
```
1. Start with grid of walls
2. Pick random starting cell, mark as floor
3. While unvisited cells exist:
   a. If current cell has unvisited neighbors:
      - Choose random unvisited neighbor
      - Remove wall between current and neighbor
      - Push current to stack, move to neighbor
   b. Else: backtrack by popping stack
4. Place rooms (treasure, monsters, exit) randomly
```

## Game Loop Flow
```
1. Initialize game (generate dungeon, place player)
2. Main loop:
   a. Render current state (map, status, log)
   b. Wait for player input
   c. Process movement/action
   d. If monster encounter â†’ combat sequence
   e. If treasure/weapon â†’ collect item
   f. If exit â†’ generate next level
   g. Check win/lose conditions
3. Game over screen with final score
```

## Visual Layout (Terminal)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DUNGEON CRAWLER - Level 3                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                   â”‚  PLAYER STATUS               â”‚
â”‚   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚
â”‚   â–ˆ.....â–ˆ.....â–ˆ$..â–ˆ......â–ˆ..â–ˆ    â”‚  HP: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80/100       â”‚
â”‚   â–ˆ.â–ˆâ–ˆâ–ˆ.â–ˆ.â–ˆâ–ˆâ–ˆ.â–ˆâ–ˆâ–ˆâ–ˆ.â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ.â–ˆ..â–ˆ    â”‚  ATK: 15  DEF: 8             â”‚
â”‚   â–ˆ.â–ˆ...â–ˆ.â–ˆ.......@â–ˆ...â–ˆ....â–ˆ    â”‚  Gold: 245                   â”‚
â”‚   â–ˆ.â–ˆ.â–ˆâ–ˆâ–ˆ.â–ˆ.â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ.â–ˆâ–ˆ.â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    â”‚                              â”‚
â”‚   â–ˆ.â–ˆ...â–ˆ.â–ˆ.â–ˆ.....M.â–ˆ.......â–ˆ    â”‚  WEAPON                      â”‚
â”‚   â–ˆ.â–ˆâ–ˆâ–ˆ.â–ˆ.â–ˆ.â–ˆ.â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ.â–ˆ.â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ.â–ˆ    â”‚  ðŸ”¥ Flaming Sword (+15)      â”‚
â”‚   â–ˆ.....â–ˆ.....â–ˆ...>.â–ˆ.......â–ˆ    â”‚                              â”‚
â”‚   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    â”‚  INVENTORY                  â”‚
â”‚                                   â”‚  â€¢ Health Potion x2         â”‚
â”‚   [M]onster  [$]Treasure  [>]Exit â”‚  â€¢ Frost Blade (+12)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  COMBAT LOG                                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  You found a Flaming Sword! Equipped automatically.              â”‚
â”‚  You collected 50 gold coins!                                    â”‚
â”‚  A Goblin appears!                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   [W/â†‘] Up  [S/â†“] Down  [A/â†] Left  [D/â†’] Right  [I] Inventory  [Q] Quit
```

## File Implementation Order
1. `constants.py` - No dependencies
2. `items.py` - Depends on constants
3. `player.py` - Depends on constants, items
4. `monsters.py` - Depends on constants
5. `dungeon.py` - Depends on constants
6. `combat.py` - Depends on player, monsters
7. `renderer.py` - Depends on all above
8. `game.py` - Depends on all above
9. `main.py` - Entry point
10. `requirements.txt` & `README.md`

## Dependencies
```
rich>=13.0.0
blessed>=1.20.0
```

## How to Run
```bash
cd code
pip install -r requirements.txt
python -m dungeon_crawler.main
```

## Success Metrics
- Game runs without errors in terminal
- Player can navigate maze with keyboard
- Combat encounters work correctly
- Items can be collected and used
- Multiple dungeon levels generate properly
- Visual display is colorful and readable